var app = require('http').createServer(handler)
var io = require('socket.io')(app);
var fs = require('fs');
var path = require('path');

function handler(req, res) {
        // Build file path
        let filePath = path.join(
            __dirname,
            'public',
            req.url === '/' ? 'index.html' : req.url
        );
        
        // Extension of the file
        let extname = path.extname(filePath);
    
        // Initial content type
        let contentType = 'text/html';
    
        // Check ext and set content type
        switch(extname) {
            case '.js':
                contentType = 'text/javascript';
                break;
            case '.css':
                contentType = 'text/css';
                break;
            case '.json':
                contentType = 'application/json';
                break;
            case '.png':
                contentType = 'image/png';
                break;
            case '.jpg':
                contentType = 'image/jpg';
                break;                    
    
        }
    
        // Read File
        fs.readFile(filePath, (err, content) => {
            if(err){
                if(err.code == 'ENOENT') {
                    // Page not found
                    fs.readFile(path.join(__dirname,'public','404.html'), (err, content) => {
                        res.writeHead(200, {'Content-Type':'text/html'});
                        res.end(content, 'utf8');
    
                    });
                } else {
                    // Some server error
                    res.writeHead(500);
                    res.end(`Server Error: ${err.code}`);
                }
            } else {
                // Success
                res.writeHead(200, {'Content-Type': contentType});
                res.end(content, 'utf8');
            }
    
        });
}

var arr = [25.268250000000002,82.98254,25.268240000000002,82.98258000000001,25.268220000000003,82.98267000000001,25.268220000000003,82.98267000000001,25.268590000000003,82.98287,25.268670000000004,82.98291,25.269080000000002,82.98313,25.269090000000002,82.98313,25.2693,82.98323,25.26941,82.98327,25.26951,82.98332,25.26957,82.98335,25.269700000000004,82.9834,25.269840000000002,82.98345,25.269940000000002,82.98349,25.270030000000002,82.98353,25.270300000000002,82.98362,25.270500000000002,82.98369000000001,25.27089,82.98381,25.2712,82.98392000000001,25.27128,82.98394,25.27138,82.98397000000001,25.27147,82.98400000000001,25.27164,82.98404000000001,25.27174,82.98407,25.27201,82.98415000000001,25.27203,82.98415000000001,25.272270000000002,82.98421,25.272470000000002,82.98426,25.272630000000003,82.9843,25.272710000000004,82.98432000000001,25.27286,82.98436000000001,25.273010000000003,82.98440000000001,25.273100000000003,82.98442,25.27323,82.98445000000001,25.27334,82.98445000000001,25.273460000000004,82.98448,25.273550000000004,82.98449000000001,25.27373,82.98450000000001,25.273930000000004,82.98453,25.274210000000004,82.98456,25.274620000000002,82.98459000000001,25.275060000000003,82.98462,25.275060000000003,82.98462,25.275150000000004,82.98476000000001,25.27523,82.98486000000001,25.2753,82.98495000000001,25.275360000000003,82.98503000000001,25.275440000000003,82.98515,25.27551,82.98522000000001,25.275530000000003,82.98525000000001,25.275630000000003,82.98533,25.275760000000002,82.98544000000001,25.27596,82.9856,25.27598,82.98561000000001,25.276110000000003,82.98573,25.276180000000004,82.98578,25.276220000000002,82.98582,25.276320000000002,82.98591,25.276390000000003,82.98597000000001,25.27645,82.98603000000001,25.27652,82.98612000000001,25.27664,82.98628000000001,25.276750000000003,82.98647000000001,25.276850000000003,82.98665000000001,25.276860000000003,82.98668,25.276930000000004,82.98683000000001,25.276960000000003,82.98688000000001,25.277050000000003,82.98706000000001,25.27717,82.98731000000001,25.277220000000003,82.98741000000001,25.277330000000003,82.9876,25.27739,82.9877,25.277430000000003,82.98776000000001,25.27748,82.98782000000001,25.277620000000002,82.98796,25.27767,82.98800000000001,25.277730000000002,82.98805,25.277780000000003,82.9881,25.27785,82.98817000000001,25.278000000000002,82.98839000000001,25.278070000000003,82.98851,25.278150000000004,82.98866000000001,25.278190000000002,82.98874,25.27822,82.98882,25.27823,82.98888000000001,25.278260000000003,82.98912,25.278290000000002,82.98935,25.27831,82.98955000000001,25.27831,82.98965000000001,25.27831,82.98992000000001,25.278260000000003,82.99073000000001,25.278250000000003,82.99079,25.278250000000003,82.99086000000001,25.278080000000003,82.99217,25.278090000000002,82.99255000000001,25.278080000000003,82.99275,25.278080000000003,82.9928,25.278080000000003,82.99289,25.278090000000002,82.99294,25.278090000000002,82.99299,25.278100000000002,82.99304000000001,25.27811,82.99308,25.278150000000004,82.99319000000001,25.278170000000003,82.99325,25.278200000000002,82.9933,25.278290000000002,82.99345000000001,25.2784,82.99367000000001,25.278480000000002,82.99384,25.278560000000002,82.99413000000001,25.278630000000003,82.99433,25.278660000000002,82.99444000000001,25.27869,82.99447,25.278720000000003,82.9945,25.278810000000004,82.99455,25.278810000000004,82.99455,25.278820000000003,82.99465000000001,25.278820000000003,82.99470000000001,25.278840000000002,82.99477,25.27887,82.9949,25.278910000000003,82.99501000000001,25.278920000000003,82.99508,25.278940000000002,82.99515000000001,25.278940000000002,82.99521,25.27898,82.99529000000001,25.279000000000003,82.99538000000001,25.279020000000003,82.99548,25.27908,82.99591000000001,25.27907,82.99608,25.27907,82.99613000000001,25.27906,82.99623000000001,25.279040000000002,82.99637000000001,25.279010000000003,82.99657,25.27897,82.99684,25.278940000000002,82.99704000000001,25.278920000000003,82.99712000000001,25.278910000000003,82.99721000000001,25.27889,82.99739000000001,25.27889,82.99742,25.27889,82.99759,25.27889,82.99766000000001,25.27888,82.99780000000001,25.27889,82.99801000000001,25.278920000000003,82.99860000000001,25.278920000000003,82.99870000000001,25.27889,82.99878000000001,25.278830000000003,82.9989,25.278750000000002,82.99903,25.278730000000003,82.99907,25.278710000000004,82.99911,25.27868,82.99918000000001,25.278660000000002,82.99929,25.278640000000003,82.99941000000001,25.278620000000004,82.9996,25.2786,82.99982,25.278570000000002,82.99998000000001,25.278560000000002,83.00008000000001,25.278470000000002,83.00062000000001,25.27842,83.00072,25.278350000000003,83.00082,25.27833,83.00085,25.2783,83.00091,25.278260000000003,83.00097000000001,25.27823,83.00103,25.278200000000002,83.00111000000001,25.278180000000003,83.00115000000001,25.278150000000004,83.00128000000001,25.27813,83.00139,25.27811,83.00150000000001,25.27803,83.00189,25.277990000000003,83.00205000000001,25.277900000000002,83.00223000000001,25.277900000000002,83.00223000000001,25.277910000000002,83.00225,25.27792,83.00227000000001,25.27792,83.0023,25.27792,83.00233,25.27792,83.00234,25.27792,83.00235,25.277910000000002,83.00235,25.277910000000002,83.00236000000001,25.277900000000002,83.00237000000001,25.277900000000002,83.00238,25.277890000000003,83.00238,25.277890000000003,83.00239,25.277880000000003,83.00239,25.277880000000003,83.00240000000001,25.277870000000004,83.00240000000001,25.27786,83.00241000000001,25.27785,83.00241000000001,25.27784,83.00241000000001,25.27783,83.00242,25.277820000000002,83.00242,25.277810000000002,83.00242,25.277810000000002,83.00241000000001,25.277800000000003,83.00241000000001,25.277790000000003,83.00241000000001,25.277780000000003,83.00241000000001,25.277780000000003,83.00240000000001,25.27777,83.00240000000001,25.27776,83.00240000000001,25.27776,83.00239,25.27775,83.00239,25.27775,83.00238,25.27774,83.00238,25.27774,83.00237000000001,25.27774,83.00236000000001,25.277730000000002,83.00236000000001,25.277730000000002,83.00235,25.277730000000002,83.00234,25.277720000000002,83.00233,25.277720000000002,83.00232000000001,25.277720000000002,83.00231000000001,25.277720000000002,83.0023,25.277720000000002,83.00229,25.277720000000002,83.00228000000001,25.277730000000002,83.00227000000001,25.277730000000002,83.00226,25.277730000000002,83.00225,25.27774,83.00225,25.27774,83.00224,25.27774,83.00223000000001,25.27775,83.00223000000001,25.27775,83.00222000000001,25.27776,83.00222000000001,25.27776,83.00221,25.27777,83.00221,25.277780000000003,83.00221,25.277780000000003,83.0022,25.277790000000003,83.0022,25.277800000000003,83.0022,25.277810000000002,83.0022,25.277810000000002,83.00219000000001,25.277820000000002,83.00219000000001,25.27783,83.00219000000001,25.27792,83.00202,25.277960000000004,83.00186000000001,25.27804,83.00148,25.278060000000004,83.00136,25.278080000000003,83.00125000000001,25.27811,83.00115000000001,25.27813,83.00109,25.278170000000003,83.00101000000001,25.278200000000002,83.00095,25.278240000000004,83.00089000000001,25.278270000000003,83.00083000000001,25.278290000000002,83.00080000000001,25.278360000000003,83.00070000000001,25.27842,83.0006,25.27851,82.99994000000001,25.278530000000003,82.99978,25.27859,82.99935,25.27861,82.99923000000001,25.278640000000003,82.99912,25.278660000000002,82.99906,25.27869,82.99901000000001,25.278710000000004,82.99897,25.278720000000003,82.99896000000001];



io.on("connection", (socket) => {
    socket.emit("welcome",arr);
    socket.on('my other event', function (data) {
       // console.log(data);
    });
    socket.on('alert-client', function(data){
        console.log("Alert !!!");
        console.log(data);
    });

});

// Takes the port assigned to the enviornment path variable or else 7000 if it is free
const PORT = process.env.PORT || 7000;

app.listen(PORT, () => console.log(`Server is running on the port ${PORT}`));